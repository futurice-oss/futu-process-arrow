<!--
Usage:



@element process-arrow
@status beta
-->
<polymer-element name="process-arrow" attributes="stages currentStageIndex">
  <template>
    <style>
      :host {
        display: block;
      }

      .stage-element {
        position: relative;
        margin: 0 2px 0 0;
        padding: 0 0.8em;
        font-size: 0.7em;
      }

      .stage-element p {
        position: relative;
        z-index: 1;
        margin: 0;
        max-height: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        line-height: 2;
        color: currentColor;
      }

      .stage-element[highlighted] p {
        color: #fff;
      }

      .stage-element::before, .stage-element::after {
        content: "";
        display: block;
        position: absolute;
        height: 50%;
        width: 100%;
        background-color: rgba(0,0,0,0.1);
        left: 0;
      }

      .stage-element::before {
        top: 0;
        -webkit-transform: skew(30deg);
        -moz-transform: skew(30deg);
        transform: skew(30deg);
      }

      .stage-element::after {
        bottom: 0;
        -webkit-transform: skew(-30deg);
        -moz-transform: skew(-30deg);
        transform: skew(-30deg);
      }

      .stage-element[highlighted]::before, .stage-element[highlighted]::after {
        background-color: currentColor;
      }

      .stage-element:last-child {
        margin-right: 0;
      }

      .stage-element core-tooltip {
        max-width: 100%;
      }

    </style>
    <div id="container" layout horizontal>
      <template repeat="{{stage in stages}}">
          <div
            class="stage-element" flex
            highlighted?="{{ activeStages[stage] }}"
            title="{{ stage }}">
            <p>{{ stage }}</p>
          </div>
      </template>
    </div>
  </template>
  <script>
    Polymer('process-arrow', {
      created: function(){
        this.stages = [];
      },
      currentStageIndexChanged: function(){
        this.activeStages = {};
        for (var i = 0; i < this.stages.length; i++) {
            if (i <= this.currentStageIndex) {
              this.activeStages[this.stages[i]] = true;
            }
        }
      }
    });
  </script>
</polymer-element>
